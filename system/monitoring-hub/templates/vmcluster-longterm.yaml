apiVersion: operator.victoriametrics.com/v1beta1
kind: VMCluster
metadata:
  name: vmcluster-longterm
  namespace: cozy-monitoring-hub
spec:
  replicationFactor: 2
  retentionPeriod: "14"
  vminsert:
    replicaCount: 2
    resources: {}
    extraArgs:
      http.pathPrefix: "/longterm"
  vmselect:
    replicaCount: 2
    extraArgs:
      search.maxUniqueTimeseries: "600000"
      vmalert.proxyURL: "http://vmalert.cozy-monitoring.svc:8080"
      dedup.minScrapeInterval: "5m"
      http.pathPrefix: "/longterm"
    cacheMountPath: /select-cache
    storage:
      volumeClaimTemplate:
        spec:
          resources:
            requests:
              storage: 2Gi
  vmstorage:
    replicaCount: 2
    storage:
      volumeClaimTemplate:
        spec:
          resources:
            requests:
              storage: 10Gi
    storageDataPath: /vm-data
